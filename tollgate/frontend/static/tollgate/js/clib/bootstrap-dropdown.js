// Generated by CoffeeScript 1.3.1

(function($) {
  var Dropdown, clearMenus, toggle;
  toggle = "[data-toggle=dropdown]";
  clearMenus = function() {
    return $(toggle).parent().removeClass("open");
  };
  Dropdown = (function() {

    Dropdown.name = 'Dropdown';

    function Dropdown(element) {
      var $el;
      $el = $(element).on("click.dropdown.data-api", this.toggle);
      $("html").on("click.dropdown.data-api", function() {
        return $el.parent().removeClass("open");
      });
    }

    Dropdown.prototype.toggle = function(e) {
      var $parent, $this, isActive, selector;
      $this = $(this);
      selector = $this.attr("data-target");
      $parent = void 0;
      isActive = void 0;
      if (!selector) {
        selector = $this.attr("href");
        if (selector) {
          selector = selector.replace(/.*(?=#[^\s]*$)/, "");
        }
      }
      $parent = $this.parent()($parent.length ? void 0 : $(selector));
      isActive = $parent.hasClass("open");
      clearMenus();
      !isActive && $parent.toggleClass("open");
      return false;
    };

    return Dropdown;

  })();
  $.fn.dropdown = function(option) {
    return this.each(function() {
      var $this, data;
      $this = $(this);
      data = $this.data("dropdown");
      if (!data) {
        $this.data("dropdown", (data = new Dropdown(this)));
      }
      if (typeof option === "string") {
        return data[option].call($this);
      }
    });
  };
  $.fn.dropdown.Constructor = Dropdown;
  return $(function() {
    $("html").on("click.dropdown.data-api", clearMenus);
    return $("body").on("click.dropdown.data-api", toggle, Dropdown.prototype.toggle);
  });
})(window.jQuery);
